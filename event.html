<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Countdown</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #0377A3;
            color: #fff;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100vh;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        h1 {
            font-size: 3rem;
            margin: 0;
        }
        p {
            font-size: 1.5rem;
            margin: 20px 0;
        }
        .countdown {
            font-size: 2rem;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="event-name">Event Name: Loading...</h1>
        <p id="event-time">Event Time: Loading...</p>
        <p class="countdown" id="countdown">--:--:--</p>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const eventName = urlParams.get('name');
        const eventTimezone = urlParams.get('timezone');
        const eventTimeStr = urlParams.get('time');

        // Create a date object from the UTC time
        const utcDate = new Date(eventTimeStr);
        
        // Format the time in the original timezone
        const originalFormatter = new Intl.DateTimeFormat('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: 'numeric',
            minute: 'numeric',
            hour12: true,
            timeZone: eventTimezone
        });

        // Get the local timezone
        const localTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

        // Format the time in local timezone
        const localFormatter = new Intl.DateTimeFormat('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: 'numeric',
            minute: 'numeric',
            hour12: true,
            timeZone: localTimezone
        });

        document.getElementById('event-name').textContent = `Event Name: ${decodeURIComponent(eventName)}`;
        document.getElementById('event-time').textContent = `Original Time: ${originalFormatter.format(utcDate)} (${eventTimezone})\n`;
        document.getElementById('event-time').textContent += `Your Local Time: ${localFormatter.format(utcDate)} (${localTimezone})`;

        function updateCountdown() {
            const now = new Date().getTime();
            const timeLeft = utcDate.getTime() - now;

            if (timeLeft <= 0) {
                document.getElementById('countdown').textContent = 'Event Started!';
                clearInterval(countdownInterval);
            } else {
                const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                document.getElementById('countdown').textContent = `${hours}h ${minutes}m ${seconds}s`;
            }
        }

        const countdownInterval = setInterval(updateCountdown, 1000);
    </script>
</body>
</html>
